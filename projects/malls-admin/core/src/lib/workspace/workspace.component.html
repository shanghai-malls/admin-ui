<nz-layout>
    <nz-header>
        <div class="wrapper">
            <div class="logo-wrapper">
                <a [routerLink]="basePath" class="logo-link">
                    <img alt="logo" class="logo-img" [src]=" setting?.logo || './assets/logo-full.svg'">
                </a>
            </div>
            <div class="top-nav-wrap">
                <ul class="top-nav">
                    <li>
                        <div class="item">
                            <i class="anticon nav-icon" [class.anticon-menu-fold]="!isCollapsed" [class.anticon-menu-unfold]="isCollapsed" (click)="isCollapsed=!isCollapsed"></i>
                        </div>
                    </li>

                </ul>

                <nz-input-group nzAddOnBeforeIcon="anticon anticon-search"
                                [class.input-group-focus]="focusSearch"
                                [class.input-group-blur]="!focusSearch">
                    <input nz-input [(ngModel)]="searchText" [nzAutocomplete]="auto" [placeholder]="'header.search-placeholder' | translate"
                           (focus)="focusSearch = true" (blur)="focusSearch = false"
                           (ngModelChange)="searchMenus($event)"/>
                </nz-input-group>

                <nz-autocomplete #auto [nzBackfill]="true" (selectionChange)="selectionChange($event)" >
                    <ng-container *ngIf="menus != null">
                        <nz-auto-optgroup *ngFor="let menu of menusForSearch" [nzLabel]="menu.displayName" >
                            <nz-auto-option *ngFor="let submenu of menu.children" [nzLabel]="submenu.displayName" [nzValue]="submenu.path" >
                                <div style="margin-left: 16px">{{submenu.displayName}}</div>
                            </nz-auto-option>
                        </nz-auto-optgroup>
                    </ng-container>
                </nz-autocomplete>

                <ul class="top-nav" style="margin: 0 16px">
                    <li>
                        <div class="item">
                            <nz-badge [nzCount]="0">
                                <i class="anticon anticon-notification nav-icon" ></i>
                            </nz-badge>
                        </div>
                    </li>
                    <li>
                        <div class="item">
                            <a href="/docs/index.html" style="color: #fff"><i class="anticon anticon-api nav-icon"></i></a>
                        </div>
                    </li>
                    <li>
                        <div class="item" (click)="logout()">
                            <i class="anticon anticon-logout nav-icon"></i>
                        </div>
                    </li>
                </ul>

                <nz-select class="language-switcher" [(ngModel)]="language" (ngModelChange)="switchLanguage($event)">
                    <nz-option nzValue="zh" nzLabel="中文"></nz-option>
                    <nz-option nzValue="en" nzLabel="English"></nz-option>
                </nz-select>
            </div>
        </div>
    </nz-header>
    <nz-layout>
        <nz-sider [(nzCollapsed)]="isCollapsed" >
            <ul nz-menu [nzMode]="'inline'" [nzInlineCollapsed]="isCollapsed" *ngIf="menus !== null" class="height-100">
                <li nz-submenu *ngFor="let menu of menus" [nzOpen]="isOpen(menu)">
                    <span title><i [class]="menu.icon"></i><span class="nav-text">{{menu.displayName}}</span></span>
                    <ul>
                        <li nz-menu-item  *ngFor="let submenu of menu.children" [nzSelected]="submenu.path === currentRoute">
                            <a [routerLink]="basePath + submenu.path" title="{{submenu.displayName}}">
                                <i [class]="submenu.icon"></i><span class="nav-text" >{{submenu.displayName}}</span>
                            </a>
                        </li>
                    </ul>
                </li>
            </ul>
        </nz-sider>
        <nz-content>
            <div class="content-title">
                <nz-breadcrumb>
                    <nz-breadcrumb-item>
                        <a [routerLink]="basePath">Home</a>
                    </nz-breadcrumb-item>
                    <nz-breadcrumb-item *ngFor="let segment of links">
                        <a [routerLink]="segment.path">{{segment.text}}</a>
                    </nz-breadcrumb-item>
                </nz-breadcrumb>
            </div>
            <div class="content-body">
                <router-outlet></router-outlet>
            </div>
        </nz-content>
    </nz-layout>
</nz-layout>
<div class="fixed-sider"></div>
<div class="fixed-background"></div>
